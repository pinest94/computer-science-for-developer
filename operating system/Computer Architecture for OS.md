# OSλ¥Ό μ„ν• Computer Architecture Basic π‘€

### Computer Architecture
![1μ£Όμ°¨-μ»΄ν“¨ν„°κµ¬μ΅°](https://user-images.githubusercontent.com/31653025/92484485-b3f2ce00-f224-11ea-8f0e-be4439214765.png)

### Mode bit
> Mode bitμ„ ν†µν•΄ ν•λ“μ›¨μ–΄μ μΌλ΅ λ‘ κ°€μ§€ λ¨λ“μ operationμ„ μ§€μ›ν•λ‹¤
```
 1 - μ‚¬μ©μλ¨λ“(User Mode) : μ‚¬μ©μ ν”„λ΅κ·Έλ¨ μν–‰
 0 - μ»¤λ„λ¨λ“(Kernel Mode), μ‹μ¤ν…λ¨λ“(System Mode) : OS μ½”λ“ μν–‰
```

* Interruptλ‚ Exception λ°μƒμ‹ ν•λ“μ›¨μ–΄κ°€ mode bitμ„ 0μΌλ΅ λ°”κΏ
* μ‚¬μ©μ ν”„λ΅κ·Έλ¨μ—κ² CPUλ¥Ό λ„κΈ°κΈ° μ „μ— mode bitμ„ 1λ΅ μ„Έν…

### Timer
> νƒ€μ΄λ¨Έλ” Time Sharingμ„ κµ¬ν„ν•κΈ° μ„ν•΄ μ‚¬μ©λ¨
* νƒ€μ΄λ¨Έλ” λ§¤ ν΄λ­ ν‹± λ•λ§λ‹¤ κ°μ†ν•μ—¬ νƒ€μ΄λ¨Έ κ°’μ΄ 0μ΄ λλ©΄ νƒ€μ΄λ¨Έ μΈν„°λ½νΈ λ°μƒ
* μ •ν•΄μ§„ μ‹κ°„μ΄ νλ¥Έ λ’¤ **μ΄μμ²΄μ μ—κ² μ μ–΄κ¶μ΄ λ„μ–΄κ°€λ„λ΅** μΈν„°λ½νΈλ¥Ό λ°μƒμ‹ν‚΄ 
    
    π‘‰ μ—¬κΈ°μ„ λ°μƒμ‹ν‚¤λ” μΈν„°λ½νΈλ” λ‹Ήμ—°ν **ν•λ“μ›¨μ–΄ μΈν„°λ½νΈ**
* CPUλ¥Ό νΉμ • ν”„λ΅κ·Έλ¨μ΄ λ…μ ν•λ” κ²ƒμΌλ΅λ¶€ν„° λ³΄νΈ
* νƒ€μ΄λ¨Έλ” ν„μ¬ μ‹κ°„μ„ κ³„μ‚°ν•κΈ° μ„ν•΄μ„λ„ μ‚¬μ©

### Device Controller
> ν•΄λ‹Ή I/O μ¥μΉμ ν•μ„ κ΄€λ¦¬ν•λ” μΌμΆ…μ μ‘μ€ CPU
* μ μ–΄ μ •λ³΄λ¥Ό μ„ν•΄ control register, status registerλ¥Ό κ°€μ§
* local bufferλ¥Ό κ°€μ§
* I/Oλ” deviceμ™€ local bufferμ‚¬μ΄μ—μ„ μΌμ–΄λ‚λ‹¤
```
device controller(μ¥μΉ μ μ–΄κΈ°) : κ° μ¥μΉλ¥Ό ν†µμ ν•λ” μΌμΆ…μ μ‘μ€ CPU ---> hardware
device driver(μ¥μΉ κµ¬λ™κΈ°) : OS μ½”λ“ μ¤‘ κ° μ¥μΉλ³„ μ²λ¦¬λ£¨ν‹΄ ---> software
```

### Interrupt π―
> λ§μ΄ν¬λ΅ν”„λ΅μ„Έμ„(CPU)κ°€ ν”„λ΅κ·Έλ¨μ„ μ‹¤ν–‰ν•κ³  μμ„ λ•, μ…μ¶λ ¥ ν•λ“μ›¨μ–΄ λ“±μ μ¥μΉλ‚ λλ” μμ™Έμƒν™©μ΄ λ°μƒν•μ—¬ μ²λ¦¬κ°€ ν•„μ”ν• κ²½μ°μ— λ§μ΄ν¬λ΅ν”„λ΅μ„Έμ„(CPU)μ—κ²μ•λ ¤ μ²λ¦¬ν•  μ μλ„λ΅ ν•λ” κ²ƒμ„ λ§ν•λ‹¤. (μ„ν‚¤λ°±κ³Ό μ°Έκ³ )
* μΈν„°λ½νΈ λ‹Ήν• μ‹μ μ λ μ§€μ¤ν„°μ™€ ν”„λ΅κ·Έλ¨ μΉ΄μ΄ν„°μ— μλ” μ£Όμ†κ°’μ„ μ €μ¥ ν›„ CPUμ μ μ–΄λ¥Ό [μΈν„°λ½νΈ μ²λ¦¬λ£¨ν‹΄](https://ko.wikipedia.org/wiki/%EC%9D%B8%ED%84%B0%EB%9F%BD%ED%8A%B8)μ— λ„κΈ΄λ‹¤
```
- Interrupt(H/W Interrupt) : ν•λ“μ›¨μ–΄κ°€ λ°μƒμ‹ν‚¨ μΈν„°λ½νΈ
        β© I/O μΈν„°λ½νΈ, νƒ€μ΄λ¨Έ μΈν„°λ½νΈ λ“±
- Trap(S/W Interrupt) : μ†ν”„νΈμ›¨μ–΄κ°€ λ°μƒμ‹ν‚¨ μΈν„°λ½νΈ π‘‰ νΈλ©μ΄λΌ λ¶€λ¥΄κΈ°λ„ ν•κ³  μΈν„°λ½νΈμ λ„“μ€μλ―Έλ΅ μΈν„°λ½νΈλΌκ³ λ„ λ¶€λ¥Έλ‹¤
        β© Exception : ν”„λ΅κ·Έλ¨μ΄ μ¤λ¥λ¥Ό λ²”ν• κ²½μ°
        β© System call : ν”„λ΅κ·Έλ¨μ΄ μ»¤λ„ν•¨μλ¥Ό νΈμ¶ν•λ” κ²½μ°
```

* μΈν„°λ½νΈ κ΄€λ ¨ μ©μ–΄
```
- μΈν„°λ½νΈ λ²΅ν„° : ν•΄λ‹Ή μΈν„°λ½νΈμ μ²λ¦¬ λ£¨ν‹΄ μ£Όμ†λ¥Ό κ°€μ§€κ³  μμ
- μΈν„°λ½νΈ μ²λ¦¬ λ£¨ν‹΄(ν•Έλ“¤λ¬) : ν•΄λ‹Ή μΈν„°λ½νΈλ¥Ό μ²λ¦¬ν•λ” μ»¤λ„ ν•¨μ
```

### System Call π―
> μ΄μμ²΄μ μ μ»¤λ„μ΄ μ κ³µν•λ” μ„λΉ„μ¤μ— λ€ν•΄, μ‘μ© ν”„λ΅κ·Έλ¨ μ”μ²­μ— λ”°λΌ μ»¤λ„μ— μ ‘κ·Όν•κΈ° μ„ν• μΈν„°νμ΄μ¤μ΄λ‹¤. λ³΄ν†µ Cλ‚ C++κ°™μ€ κ³ κΈ‰μ–Έμ–΄λ΅ μ‘μ„±λ ν”„λ΅κ·Έλ¨λ“¤μ€ μ§μ ‘ μ‹μ¤ν… νΈμ¶μ„ μ‚¬μ©ν•  μ μ—†κΈ° λ•λ¬Έμ— κ³ κΈ‰ APIλ¥Ό ν†µν•΄ μ‹μ¤ν… μ½μ— μ ‘κ·Όν•κ² ν•λ” λ°©λ²•μ΄λ‹¤. (μ„ν‚¤λ°±κ³Ό μ°Έκ³ )

* μ‚¬μ©μ ν”„λ΅κ·Έλ¨μ΄ μ΄μμ²΄μ μ μ„λΉ„μ¤λ¥Ό λ°›κΈ° μ„ν•΄ μ»¤λ„ ν•¨μλ¥Ό νΈμ¶ν•λ” κ²ƒ π‘‰ ν° μλ―Έμ—μ„λ” trapμ„ λ°μƒμ‹ν‚¤λ” κ²ƒμ΄κ³ , μμ„Έν λ§ν•λ©΄ System callμ΄λΌ ν•λ‹¤

### DMA(Direct Memory Access)
> νΉμ • ν•λ“μ›¨μ–΄ ν•μ„ μ‹μ¤ν…μ΄ CPUμ™€ λ…λ¦½μ μΌλ΅ λ©”μΈ μ‹μ¤ν… λ©”λ¨λ¦¬μ— μ ‘κ·Όν•  μ μκ² ν•΄μ£Όλ” μ»΄ν“¨ν„° μ‹μ¤ν…μ κΈ°λ¥
* CPUμ μ¤‘μ¬μ—†μ΄ device controllerκ°€ deviceμ buffer storageμ λ‚΄μ©μ„ λ©”λ¨λ¦¬μ— blockλ‹¨μ„λ΅ μ§μ ‘ μ „μ†΅
* λ°”μ΄νΈ λ‹¨μ„κ°€ μ•„λ‹ λΈ”λ­λ‹¨μ„λ΅ μΈν„°λ½νΈ λ°μƒμ‹ν‚΄ π‘‰ **CPUμ—κ² μΈν„°λ½νΈ λ°μƒ μλ¥Ό μ¤„μ„(μ¤λ²„ν—¤λ“ κ°μ†)**

### references
* μ΄μμ²΄μ  9ν Silberschatz , Peter B. Galvin , Greg Gagne μ§€μ
* μ΄ν™”μ—¬μλ€ν•™κµ λ°ν¨κ²½ κµμ κ°•μ μ°Έκ³ 
* κ³ λ ¤λ€ν•™κµ μµλ¦° κµμ κ°•μ μ°Έκ³ 
* [μΈν„°λ½νΈ μ„ν‚¤λ°±κ³Ό](https://ko.wikipedia.org/wiki/%EC%9D%B8%ED%84%B0%EB%9F%BD%ED%8A%B8)
* [μ‹μ¤ν… μ½ μ„ν‚¤λ°±κ³Ό](https://ko.wikipedia.org/wiki/%EC%8B%9C%EC%8A%A4%ED%85%9C_%ED%98%B8%EC%B6%9C)
